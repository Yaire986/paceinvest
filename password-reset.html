<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Reset Password - ChargePace</title>
    <link href="style.css" rel="stylesheet" type="text/css"/>
</head>
<body class="login-page-body">
    <div class="login-container">
        <header class="login-header">
            <a href="index.html" class="login-logo">CHARGEPACE</a>
            <div class="lang-selector">
                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-1 17.93c-3.95-.49-7-3.85-7-7.93 0-.62.08-1.21.21-1.79L8.99 15v1c0 1.1.9 2 2 2v1.93zm6.9-2.54c-.26-.81-1-1.39-1.9-1.39h-1v-3c0-.55-.45-1-1-1h-2v-2h2c.55 0 1-.45 1-1V7h2c1.1 0 2-.9 2-2v-.41c2.93 1.19 5 4.06 5 7.41 0 2.62-1.23 4.96-3.1 6.39z" fill="currentColor"/></svg>
                <span>en-US</span>
            </div>
        </header>
        <main class="login-form-wrapper">
            <!-- This container will hold both the form and the success message -->
            <div id="reset-container">
                <h1>Reset Password</h1>
                <p class="reset-text">Enter your account email address and we will send you a link to reset your password.</p>
                <form id="reset-form">
                    <div class="input-group">
                        <label for="email">Email</label>
                        <input type="email" id="email" name="email" required autocomplete="email">
                    </div>
                    <button type="submit" class="btn btn-primary" id="btn-reset">Send Reset Link</button>
                </form>
                 <a href="login.html" class="trouble-link">Back to Sign In</a>
            </div>

            <!-- Success Message (Initially Hidden) -->
            <div id="success-message" class="hidden">
                <div class="verify-icon">
                    <svg xmlns="http://www.w3.org/2000/svg" width="64" height="64" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"><path d="M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"></path><polyline points="22,6 12,13 2,6"></polyline></svg>
                </div>
                <h1>Check Your Inbox</h1>
                <p class="verify-text">A password reset link has been sent to your email address. Please follow the instructions in the email to set a new password.</p>
                <a href="login.html" class="btn btn-secondary">Back to Sign In</a>
            </div>
        </main>
        <footer class="login-footer">
            <p>ChargePace &copy; 2025</p>
            <div class="footer-links">
                <a href="#">Privacy & Legal</a>
                <a href="#">Contact</a>
            </div>
        </footer>
    </div>

    <!-- Firebase SDKs -->
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-auth.js"></script>

    <!-- Initialize Firebase -->
    <script>
      const firebaseConfig = {
        apiKey: "AIzaSyDxAuX5hEWOuYdeGSvQHxhMlb9hyRZTNYw", // Replace with your secure key
        authDomain: "twc2-95e6e.firebaseapp.com",
        projectId: "twc2-95e6e",
        storageBucket: "twc2-95e6e.appspot.com",
        messagingSenderId: "648663487938",
        appId: "1:648663487938:web:f466fd8fdd893bdaeef25b"
      };
      firebase.initializeApp(firebaseConfig);
      const auth = firebase.auth();
    </script>

    <!-- Password Reset Logic -->
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const resetForm = document.getElementById('reset-form');
            const resetContainer = document.getElementById('reset-container');
            const successMessage = document.getElementById('success-message');
            const btnReset = document.getElementById('btn-reset');
            const emailInput = document.getElementById('email');

            resetForm.addEventListener('submit', function(event) {
                event.preventDefault();
                const email = emailInput.value;

                if (!email) {
                    alert("Please enter your email address.");
                    return;
                }

                btnReset.textContent = "Sending...";
                btnReset.disabled = true;

                auth.sendPasswordResetEmail(email)
                    .then(() => {
                        // Success! Hide the form and show the success message.
                        resetContainer.classList.add('hidden');
                        successMessage.classList.remove('hidden');
                    })
                    .catch(error => {
                        console.error("Password reset error:", error);
                        // Even if the user doesn't exist, we show a generic success message
                        // to prevent "email enumeration" (a security best practice).
                        resetContainer.classList.add('hidden');
                        successMessage.classList.remove('hidden');
                    });
            });
        });
    </script>
</body>
</html>